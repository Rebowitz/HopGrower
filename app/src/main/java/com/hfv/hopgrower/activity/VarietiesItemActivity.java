package com.hfv.hopgrower.activity;/** * @author Robert B. Andrews * RBA Internet Services, Inc. Strasburg, Virginia * Copyright 2014  All Rights Reserved */import android.annotation.SuppressLint;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.support.v7.app.ActionBarActivity;import android.text.Html;import android.widget.TextView;import com.hfv.hopgrower.R;import com.hfv.hopgrower.adapter.VarietiesItemAdapter;import com.hfv.hopgrower.dbhelper.HopGrowerDatabaseHelper;import com.hfv.hopgrower.sqlite.Varieties;import com.hfv.hopgrower.sqlite.VarietiesDao;import com.hfv.hopgrower.sqlite.VarietiesDao.Properties;import com.rbais.expandablewidgets.ExpandableHeightGridView;import java.util.Iterator;import java.util.List;import de.greenrobot.dao.query.QueryBuilder;public class VarietiesItemActivity extends ActionBarActivity {    HopGrowerDatabaseHelper mDbHelper;    private String[] labels = new String[11];    private String[] data = new String[11];    //	GridView varGrid;    ExpandableHeightGridView varGrid;    public static class ViewHolder {        public TextView label;        public TextView data;    }    @SuppressLint("UseSparseArrays")    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.variety_info_page_top);        getSupportActionBar().setTitle(R.string.app_varieties);        Intent intent = getIntent();        String varietyNm = intent.getStringExtra("selectedVar");        String countryNm = intent.getStringExtra("countryVar");        Context mCtx = getApplicationContext();        mDbHelper = new HopGrowerDatabaseHelper(mCtx);        mDbHelper.onCreate();        VarietiesDao varietyDao = mDbHelper.getVarietiesDaoSession();        QueryBuilder<Varieties> qb = varietyDao.queryBuilder();        qb.where(Properties.Variety.eq(varietyNm), Properties.Country.eq(countryNm));        List<Varieties> varList = qb.list();        mDbHelper.closeDaoSession();        //creating our views, we need a main view(content view listed above) and the grid view        //then we need to load up the cells and stuff them into the grid view        TextView hu = (TextView) findViewById(R.id.hu_info_page);        TextView variety = (TextView) findViewById(R.id.textView1);        TextView aroma = (TextView) findViewById(R.id.aroma);        TextView usage = (TextView) findViewById(R.id.usage);        TextView subst = (TextView) findViewById(R.id.substitute);        TextView styles = (TextView) findViewById(R.id.styles);        TextView pedigree = (TextView) findViewById(R.id.pedigree);        TextView yield = (TextView) findViewById(R.id.yield);        TextView storage = (TextView) findViewById(R.id.storage);        TextView info = (TextView) findViewById(R.id.info);        TextView percept = (TextView) findViewById(R.id.perception);        Iterator<Varieties> getVarIter = varList.iterator();        Varieties theObj = new Varieties();        hu.setText(Html.fromHtml("<u>Variety data obtained from the HopUnion website:</u> <a href=\"http://www.hopunion.com\">www.hopunion.com</a>"));        while (getVarIter.hasNext()) {            theObj = getVarIter.next();            variety.setText("Variety: " + theObj.getVariety());  //set to bold in xml layout            aroma.setText(Html.fromHtml("<b>Aroma: </b>" + theObj.getAroma()));            usage.setText(Html.fromHtml("<b>Usage: </b>" + theObj.getUsage()));            subst.setText(Html.fromHtml("<b>Substitutes: </b>" + theObj.getSubstitutes()));            styles.setText(Html.fromHtml("<b>Brewing Styles: </b>" + theObj.getBeerStyles()));            pedigree.setText(Html.fromHtml("<b>Pedigree: </b>" + theObj.getPedigree()));            yield.setText(Html.fromHtml("<b>Yield per acre: </b>" + theObj.getYield()));            storage.setText(Html.fromHtml("<b>Storage stability: </b>" + theObj.getStorage()));            info.setText(Html.fromHtml("<b>Additional info: </b>" + theObj.getInfo()));            percept.setText(Html.fromHtml("<b>Industry description: </b>" + theObj.getPerception()));            //this type of coding is ok, because they can only select one item from the varieties listview at a time <-famous last words            labels[0] = "Alpha Acids: ";            data[0] = theObj.getAA();            labels[1] = "Beta Acids: ";            data[1] = theObj.getBA();            labels[2] = "Co-Humulone: ";            data[2] = theObj.getCoHum();            labels[3] = "Total Oils: ";            data[3] = theObj.getTotOil();            labels[4] = "Myrcene: ";            data[4] = theObj.getMyrcene();            labels[5] = "Humulene: ";            data[5] = theObj.getHumulene();            labels[6] = "Caryophyllene: ";            data[6] = theObj.getCaro();            labels[7] = "Farnesene: ";            data[7] = theObj.getFarn();            labels[8] = " ";            data[8] = " ";            labels[9] = " ";            data[9] = " ";            labels[10] = " ";            data[10] = " ";        }//this breaks if there is more than one iteration.  Set variety listview to single selection.        varGrid = (ExpandableHeightGridView) findViewById(R.id.var_info_grid);        //	varGrid = (GridView) findViewById(R.id.var_info_grid);        varGrid.setFocusable(false);        varGrid.setExpanded(true);        varGrid.setAdapter(new VarietiesItemAdapter(this, labels, data));    }}