package com.hfv.hopgrower.activity;/** * @author Robert B. Andrews * RBA Internet Services, Inc. Strasburg, Virginia * Copyright 2014  All Rights Reserved */import android.content.Context;import android.content.Intent;import android.graphics.Color;import android.os.Bundle;import android.support.v7.app.ActionBarActivity;import android.text.Html;import android.view.View;import android.widget.AdapterView;import android.widget.ListView;import android.widget.SimpleAdapter;import android.widget.TextView;import com.hfv.hopgrower.R;import com.hfv.hopgrower.dbhelper.HopGrowerDatabaseHelper;import com.hfv.hopgrower.sqlite.VarietiesDao;import java.util.ArrayList;import java.util.HashMap;import java.util.List;//import com.hfv.hopgrower.sqlite.EstablishAppDatabase;public class VarietiesActivity extends ActionBarActivity {    //	protected HopGrowerDatabaseHelper theApp;    HopGrowerDatabaseHelper mDbHelper;    Boolean dbExist = null;    ListView listView;    int listsize = 0;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.variety_main);        getSupportActionBar().setTitle(R.string.app_varieties);        Context mCtx = getApplicationContext();        //theApp = new HopGrowerDatabaseHelper();        mDbHelper = new HopGrowerDatabaseHelper(mCtx);        mDbHelper.onCreate();//	    mDbHelper = new EstablishAppDatabase(this);//	    DaoSession daoSess = mDbHelper.getVarietiesDaoSession();        VarietiesDao varietyDao = mDbHelper.getVarietiesDaoSession();        String[] varietyNames = varietyDao.getVarietyNames();        String[] countryNames = varietyDao.getCountryNames();        mDbHelper.closeDaoSession();        TextView hu = (TextView) findViewById(R.id.hu);        hu.setText(Html.fromHtml("<u>Variety data obtained from the HopUnion website:</u> <a href=\"http://www.hopunion.com\">www.hopunion.com</a>"));//		Log.d("HopGrower", "First variety in array is " + varietyNames[0]);//		Log.d("HopGrower", "First country in array is " + countryNames[0]);        listsize = varietyNames.length;//		Log.d("HopGrower","List size is: " + listsize);        List<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();        for (int i = 0; i < listsize; i++) {            HashMap<String, String> hm = new HashMap<String, String>();            hm.put("text1", varietyNames[i]);            hm.put("text2", countryNames[i]);            //       	Log.d("HopGrower","Variety name is: " + hm.get("text1"));            //       	Log.d("HopGrower","Country name is: " + hm.get("text2"));            aList.add(hm);        }        // Keys used in Hashmap        String[] from = {"text1", "text2"};        // Ids of views in listview_layout        int[] to = {android.R.id.text1, android.R.id.text2};        // Instantiating an adapter to store each items        // R.layout.listview_layout defines the layout of each item        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, android.R.layout.simple_list_item_2, from, to);        // Getting a reference to listview of main.xml layout file        listView = (ListView) findViewById(R.id.list);        // Setting the adapter to the listView        listView.setAdapter(adapter);        listView.setBackgroundColor(Color.parseColor("#10DA5C"));        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);//		Log.d("HopGrower","Setting on item click listener");        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> adapterView, View view, int position, long l) {                Intent varietiesItemIntent = new Intent();                varietiesItemIntent.setClassName("com.hfv.hopgrower", "com.hfv.hopgrower.activity.VarietiesItemActivity");                TextView textView1 = (TextView) view.findViewById(android.R.id.text1);                TextView textView2 = (TextView) view.findViewById(android.R.id.text2);                String variety = textView1.getText().toString();                String country = textView2.getText().toString();//		        Log.d("HopGrower","Got Variety string of " + variety);//		        Log.d("HopGrower","Got Country string of " + country);                varietiesItemIntent.putExtra("selectedVar", variety);                varietiesItemIntent.putExtra("countryVar", country);                startActivity(varietiesItemIntent);            }        });    }    //end of on create}//end of activity